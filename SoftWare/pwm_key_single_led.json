esphome:
  name: esp
  platform: ESP32
  board: esp-wrover-kit

wifi:
  ssid: "ATLANT"
  password: "31415926"

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Esp Fallback Hotspot"
    password: "8nAOg6sjzsSq"

captive_portal:

# Enable logging
logger:
#  level: WARN
# Enable Home Assistant API
api:
  password: "negatron"

ota:
  password: "negatron"

web_server:
  port: 80

#sensor:
#  - platform: dht
#    model : DHT11
#    pin: GPIO14
#    temperature:
#      name: Living Room Temperature
#    humidity:
#      name: Living Room Humidity
#    update_interval: 5s  

switch:
  - platform: gpio
    pin: 26
    name: "LED"
    id: led_1
    restore_mode: RESTORE_DEFAULT_OFF
  
  - platform: gpio
    pin: 13
#LED_up
    id: led_2

  - platform: gpio
    pin: 14
#LED_down
    id: led_3
    
# PWM LED    
output:
  - platform: ledc
    pin: GPIO25
    id: gpio_25

light:
  - platform: monochromatic
    output: gpio_25
    id: LED1
    name: "LED2"
# PWM LED end section   

status_led:
  pin:
    number: GPIO27
    inverted: False

esp32_touch:
  setup_mode: false

binary_sensor:
  - platform: esp32_touch
    name: "ESP32 Touch Pad GPIO12"
    pin: GPIO12
    threshold: 500
filters:
      delayed_on_off: 100ms
    on_press:
      then:
        - light.toggle: LED1        

  - platform: esp32_touch
    id: key_up
    pin: GPIO32
    threshold: 500
    on_press:
      - while:
          condition:   
            binary_sensor.is_on: key_up
          then:
            - switch.turn_on: led_2  
            - light.dim_relative:
                id: LED1
                relative_brightness: 5%
                transition_length: 0.1s
            - delay: 0.1s          
    on_release:
      then:
        - switch.turn_off: led_2          

  - platform: esp32_touch
    id: key_down
    pin: GPIO33
    threshold: 500
    on_press:
      - while:
          condition:   
            binary_sensor.is_on: key_down
          then:
            - switch.turn_on: led_3  
            - light.dim_relative:
                id: LED1
                relative_brightness: -5%
                transition_length: 0.1s
            - delay: 0.1s          
    on_release:
      then:
        - switch.turn_off: led_3        